<!Doctype HTML>
<html>
   <head>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"
               integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
               crossorigin="anonymous"></script>
      <!--   <script> https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js </script>-->
       <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      <link rel="stylesheet" href="style.css">
   </head>
    <body>
        <main>
            <header>
                <h1>Random quote machine</h1>
            </header>
            <div class="box">
                <h2 class="quote"></h2>
                <h3 class="author"></h3>
            </div>
            <div>
                <button class="trigger"> Random quote </button>
                <a href="#" target="_blank" class="tweet"><i class="fa fa-twitter" aria-hidden="true"></i></a>
            </div>
        </main>
       

        <script>
       var tweetLink = "https://twitter.com/intent/tweet?text=",
    prefix = "https://cors-anywhere.herokuapp.com/",
    quoteUrl = "https://quotesondesign.com/wp-json/posts?filter[orderby]=rand&filter[posts_per_page]=1";

function getQuote() {
    $.getJSON(prefix + quoteUrl, createTweet);
    $.ajaxSetup({
        cache: false
    });
}

function createTweet(input) {
    var data = input[0];

    var quoteText = $(data.content).text().trim();
    var quoteAuthor = data.title;

    if (!quoteAuthor.length) {
        quoteAuthor = "unknown author";

    }
    var tweetText = "Quote of the day - " + quoteText + " Author: " + quoteAuthor;
    if (tweetText.length > 140) {
        getQuote();
    } else {
        var tweet = tweetLink + encodeURIComponent(tweetText);
        $('.quote').text(quoteText);
        $('.author').text("Author: " + quoteAuthor);
        $('.tweet').attr('href', tweet);
    }
}


$(document).ready(function () {

    getQuote();
    $('.trigger').click(function () {
        getQuote();
    })

});
       </script>

    </body>
</html>
